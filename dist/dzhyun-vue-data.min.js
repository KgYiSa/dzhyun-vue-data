!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Vue"),require("Dzhyun")):"function"==typeof define&&define.amd?define(["Vue","Dzhyun"],e):"object"==typeof exports?exports.DzhyunVueData=e(require("Vue"),require("Dzhyun")):t.DzhyunVueData=e(t.Vue,t.Dzhyun)}(this,function(t,e){return function(t){function e(u){if(n[u])return n[u].exports;var r=n[u]={i:u,l:!1,exports:{}};return t[u].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,u){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:u})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(e,n){e.exports=t},function(t,e,n){"use strict";function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),o=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=o.default.component("dzhyun-data-query",{props:{url:{type:String,required:!0},params:Object,shrinkData:{type:Boolean,default:!0},propName:{type:String,default:"data"},initData:{type:Object,default:function(){return null}},reset:{type:Boolean,default:!1},adapt:Function,autoQuery:{type:Boolean,default:!0},subscribe:{type:Boolean,default:!1}},data:function(){return{request:null,data:null,paramsStr:null}},computed:{queryArguments:function(){return[this.url,JSON.parse(this.paramsStr),this.callback,this.shrinkData]},output:function(){return this.data||this.initData}},watch:{params:{handler:function(){this.paramsStr=JSON.stringify(this.params||{})},deep:!0,immediate:!0},queryArguments:function(){this.autoQuery&&(this.cancel(),this.query())}},methods:{query:function(){var t=this.$dzhyun;if(!t)return void console.warn("未创建Dzhyun");this.request=this.subscribe?t.subscribe.apply(t,r(this.queryArguments)):t.query.apply(t,r(this.queryArguments))},cancel:function(){this.request&&this.request.cancel(),this.reset&&(this.data=null)},callback:function(t){t instanceof Error&&this.$emit("error",t),this.adapt&&(t=this.adapt(t,this.data)),this.$dzhyunData=t,this.data=t,this.$emit("data",t)}},beforeMount:function(){this.autoQuery&&this.query()},destroyed:function(){this.cancel()},render:function(t,e){var n=this,a=[];return this.$slots.default&&a.push.apply(a,r(this.$slots.default.map(function(t){return t.componentOptions&&t.componentOptions.propsData&&(t.componentOptions.propsData[n.propName]=n.output),t}))),this.$scopedSlots&&this.$scopedSlots.default&&a.push.apply(a,r(this.$scopedSlots.default(u({},this.propName,this.output)))),a.length<=1?a[0]:t("div",{class:"dzhyun-data-query"},a)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),r=function(t){return t&&t.__esModule?t:{default:t}}(u);e.default={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dzhyun;n||(n=this.getInstance(e)),Object.defineProperties(t.prototype,{$dzhyun:{configurable:!0,get:function(){return this.$parent?this.$parent.$dzhyun:n},set:function(t){Object.defineProperties(this,{$dzhyun:{writable:!0,value:t}})}},$dzhyunData:{configurable:!0,get:function(){return this.$parent?this.$parent.$dzhyunData:null},set:function(t){Object.defineProperties(this,{$dzhyunData:{writable:!0,value:t}})}}})},getInstance:function(t){return new r.default(t)}}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=u(r),o=n(2),s=u(o);e.default=a.default.component("dzhyun-data-source",{props:["address","dataType","token","compresser"],created:function(){var t=s.default.getInstance(this.$props);a.default.use(s.default,{dzhyun:t}),this.$dzhyun=t},destroyed:function(){this.$dzhyun.close()},render:function(t){var e=this.$slots.default||[];return e.length<=1?e[0]:t("div",{class:"dzhyun-data-source"},e)}})},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=u(r),o=n(1),s=u(o);e.default=a.default.component("dzhyun-data-subscribe",{extends:s.default,props:{subscribe:{type:Boolean,default:!0}}})},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}var r=n(2),a=u(r),o=n(3),s=u(o),i=n(1),d=u(i),c=n(4),l=u(c);Object.assign(a.default,{DzhyunDataSource:s.default,DzhyunDataQuery:d.default,DzhyunDataSubscribe:l.default}),t.exports=a.default},function(t,n){t.exports=e}])});